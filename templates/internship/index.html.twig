{% extends 'base.html.twig' %}

{% block body %}
    <h3>Les stages</h3>

    <p><a href="{{ path('add_internship') }}">Donner un stage</a></p>

    {#Barre de recherche#}
    <div id="divRecherche">
        <ul class="list-inline">
            <li>
                <form method="post">
                    <input type="submit" value="Tous"/>
                </form>
            </li>
            <li><button class="search-button">Plus de critères</button></li>
        </ul>
        <div class="form-div">
            {{ form_start(formInternshipSearch) }}
            <label>Rechercher par : </label>
            <select class="type-search">
                <option value="">Choisissez une option</option>
                <option value="date"> Date </option>
                <option value="titre"> Titre </option>
                <option value="matiere"> Matière </option>
                <option value="promo"> Difficulté </option>
            </select>
            <br />

            <div class="date-search">
                {{ form_row(formInternshipSearch.date) }}
                <br />
            </div>

            <div class="titre-search">
                {{ form_row(formInternshipSearch.intitule) }}
                <br />
            </div>

            <div class="matiere-search">
                {{ form_row(formInternshipSearch.idMatiere) }}
                <br />
            </div>

            <div class="promo-search">
                {{ form_row(formInternshipSearch.idPromo) }}
                <br />
            </div>

            <button>Rechercher</button>
            {{ form_end(formInternshipSearch) }}
            <br />
        </div>
    </div>

    <p>Stages disponible :</p>
    {% if internship is not null %}
        {% for internship in internship %}
            {% if internship.status is same as(0) %}
                <div>
                    <p><b>{{ internship.idMatiere.intitule }}</b></p>
                    <p><i>Date du prochain cours :</i><br />
                        {{ internship.date |format_datetime('full', 'none', locale='fr') }} à {{ internship.heure |format_time('short', locale='fr') }}</p>
                    <p>{{ internship.idPromo.promo }}</p>
                    <p>{{ internship.intitule }}</p>
                    {% if app.user %}
                        <a href="{{ path('update_internship', { 'id':internship.idCours }) }}">Modifier / </a>
                        <a href="{{ path('close_course', { 'id':internship.idCours }) }}">Clore le stage / </a>
                        <a href="{{ path('cancel_course', { 'id':internship.idCours }) }}">Annuler le stage</a>
                    {% endif %}
                    <button>S'inscrire</button>
                </div>
            {% endif %}
        {% endfor %}
        <br />
    {% else %}
        <p>Pas de stages</p>
    {% endif %}
    <div>
        {{ knp_pagination_render(internship) }}
    </div>
{% endblock %}
